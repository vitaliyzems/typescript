import { renderSearchFormBlock } from './search-form.js';
import { renderSearchStubBlock } from './search-results.js';
import { getUserData, renderUserBlock, writeUser } from './user.js';
import { renderToast } from './lib.js';
writeUser({ userName: 'Test User', avatarUrl: '/public/img/avatar.png' });
const user = getUserData();
localStorage.removeItem('favoriteItems');
window.addEventListener('DOMContentLoaded', () => {
    renderUserBlock(user.userName, user.avatarUrl, getFavoritesAmount());
    renderSearchFormBlock();
    renderSearchStubBlock();
    renderToast({
        text: 'Это пример уведомления. Используйте его при необходимости',
        type: 'success',
    }, {
        name: 'Понял',
        handler: () => {
            console.log('Уведомление закрыто');
        },
    });
});
function getFavoritesAmount() {
    const favoriteItemsJson = localStorage.favoriteItems;
    if (!favoriteItemsJson) {
        return 0;
    }
    const favoriteItems = JSON.parse(favoriteItemsJson);
    const count = Object.keys(favoriteItems).length;
    renderUserBlock(user.userName, user.avatarUrl, count);
    return count;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDekQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFHdkMsU0FBUyxDQUFDLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQyxDQUFDO0FBRTFFLE1BQU0sSUFBSSxHQUFHLFdBQVcsRUFBRSxDQUFDO0FBRTNCLFlBQVksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLENBQUM7QUFFekMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtJQUMvQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLGtCQUFrQixFQUFFLENBQUMsQ0FBQztJQUNyRSxxQkFBcUIsRUFBRSxDQUFDO0lBQ3hCLHFCQUFxQixFQUFFLENBQUM7SUFDeEIsV0FBVyxDQUNUO1FBQ0UsSUFBSSxFQUFFLDJEQUEyRDtRQUNqRSxJQUFJLEVBQUUsU0FBUztLQUNoQixFQUNEO1FBQ0UsSUFBSSxFQUFFLE9BQU87UUFDYixPQUFPLEVBQUUsR0FBRyxFQUFFO1lBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7S0FDRixDQUNGLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQUVILFNBQVMsa0JBQWtCO0lBQ3pCLE1BQU0saUJBQWlCLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQztJQUVyRCxJQUFJLENBQUMsaUJBQWlCLEVBQUU7UUFDdEIsT0FBTyxDQUFDLENBQUM7S0FDVjtJQUVELE1BQU0sYUFBYSxHQUFrQixJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDbkUsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFFaEQsZUFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN0RCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXJTZWFyY2hGb3JtQmxvY2sgfSBmcm9tICcuL3NlYXJjaC1mb3JtLmpzJztcbmltcG9ydCB7IHJlbmRlclNlYXJjaFN0dWJCbG9jayB9IGZyb20gJy4vc2VhcmNoLXJlc3VsdHMuanMnO1xuaW1wb3J0IHsgZ2V0VXNlckRhdGEsIHJlbmRlclVzZXJCbG9jaywgd3JpdGVVc2VyIH0gZnJvbSAnLi91c2VyLmpzJztcbmltcG9ydCB7IHJlbmRlclRvYXN0IH0gZnJvbSAnLi9saWIuanMnO1xuaW1wb3J0IHsgRmF2b3JpdGVJdGVtcyB9IGZyb20gJy4vdHlwZXMuanMnO1xuXG53cml0ZVVzZXIoeyB1c2VyTmFtZTogJ1Rlc3QgVXNlcicsIGF2YXRhclVybDogJy9wdWJsaWMvaW1nL2F2YXRhci5wbmcnIH0pO1xuXG5jb25zdCB1c2VyID0gZ2V0VXNlckRhdGEoKTtcblxubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2Zhdm9yaXRlSXRlbXMnKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIHJlbmRlclVzZXJCbG9jayh1c2VyLnVzZXJOYW1lLCB1c2VyLmF2YXRhclVybCwgZ2V0RmF2b3JpdGVzQW1vdW50KCkpO1xuICByZW5kZXJTZWFyY2hGb3JtQmxvY2soKTtcbiAgcmVuZGVyU2VhcmNoU3R1YkJsb2NrKCk7XG4gIHJlbmRlclRvYXN0KFxuICAgIHtcbiAgICAgIHRleHQ6ICfQrdGC0L4g0L/RgNC40LzQtdGAINGD0LLQtdC00L7QvNC70LXQvdC40Y8uINCY0YHQv9C+0LvRjNC30YPQudGC0LUg0LXQs9C+INC/0YDQuCDQvdC10L7QsdGF0L7QtNC40LzQvtGB0YLQuCcsXG4gICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAn0J/QvtC90Y/QuycsXG4gICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfQo9Cy0LXQtNC+0LzQu9C10L3QuNC1INC30LDQutGA0YvRgtC+Jyk7XG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRGYXZvcml0ZXNBbW91bnQoKTogbnVtYmVyIHtcbiAgY29uc3QgZmF2b3JpdGVJdGVtc0pzb24gPSBsb2NhbFN0b3JhZ2UuZmF2b3JpdGVJdGVtcztcblxuICBpZiAoIWZhdm9yaXRlSXRlbXNKc29uKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBjb25zdCBmYXZvcml0ZUl0ZW1zOiBGYXZvcml0ZUl0ZW1zID0gSlNPTi5wYXJzZShmYXZvcml0ZUl0ZW1zSnNvbik7XG4gIGNvbnN0IGNvdW50ID0gT2JqZWN0LmtleXMoZmF2b3JpdGVJdGVtcykubGVuZ3RoO1xuXG4gIHJlbmRlclVzZXJCbG9jayh1c2VyLnVzZXJOYW1lLCB1c2VyLmF2YXRhclVybCwgY291bnQpO1xuICByZXR1cm4gY291bnQ7XG59Il19